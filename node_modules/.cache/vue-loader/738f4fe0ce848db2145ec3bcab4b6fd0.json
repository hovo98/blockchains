{"remainingRequest":"C:\\xampp\\htdocs\\cosmos\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\cosmos\\node_modules\\@cosmos-ui\\vue\\src\\NewsletterSignup\\ValidatorNewsletterSignup.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\cosmos\\node_modules\\@cosmos-ui\\vue\\src\\NewsletterSignup\\ValidatorNewsletterSignup.vue","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\cosmos\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\xampp\\htdocs\\cosmos\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\cosmos\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport GraphicsPlanes from \"./GraphicsPlanes\";\nimport GraphicsMail from \"./GraphicsMail\";\nimport DsButton from \"./DsButton\";\nimport IconArrowRight from \"../Icons/IconArrowRight\";\nimport IconChevronLeft from \"../Icons/IconChevronLeft\";\nimport IconNetwork from \"../Icons/IconNetwork\";\nimport IconIbc from \"../Icons/IconIbc\";\nimport CardCheckbox from \"./CardCheckbox\";\nimport querystring from \"querystring\";\nimport axios from \"axios\";\nimport BackgroundStars from \"./BackgroundStars\";\n\nexport default {\n  props: {\n    h1: {\n      default: \"Sign up for Cosmos updates\"\n    },\n    h2: {\n      default:\n        \"Get the latest from the Cosmos ecosystem and engineering updates, straight to your inbox.\"\n    },\n    requestURL: {\n      default: \"https://app.mailerlite.com/webforms/submit/o0t6d7\"\n    },\n    callback: {\n      default: \"jQuery18307296239382192573_1594158619276\"\n    },\n    _: {\n      default: \"1594158625563\"\n    },\n    groups: {\n      default: false\n    },\n    svg: {\n      default: false\n    },\n    background: {\n      default: false\n    },\n    topics: {\n      default: () => []\n    },\n    banner: {\n      type: Boolean,\n      default: true\n    },\n    fullscreen: {\n      type: String\n    },\n    validator: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    fullscreen() {\n      this.setHeight(`step${this.step}`);\n    }\n  },\n  components: {\n    GraphicsPlanes,\n    GraphicsMail,\n    DsButton,\n    IconArrowRight,\n    IconChevronLeft,\n    IconIbc,\n    CardCheckbox,\n    IconNetwork,\n    BackgroundStars\n  },\n  data: function() {\n    return {\n      step: 0,\n      transition: \"forwards\",\n      pageMinHeight: null,\n      email: null,\n      name: null,\n      selected: this.topics.map(t => false),\n      icons: [],\n      ready: false,\n      iconHero: false,\n      commonFormData: {\n        \"ml-submit\": \"1\",\n        \"ajax\": \"1\",\n        \"guid\": \"6ca22b31-4124-e926-cf4f-272ff9f44ec3\"\n      }\n    };\n  },\n  async mounted() {\n    if (this.svg) {\n      this.iconHero = (await axios.get(this.svg)).data;\n    }\n    this.setHeight(`step${this.step}`);\n    this.ready = true;\n    this.topics.forEach(async topic => {\n      let icon = false;\n      try {\n        icon = (await axios.get(topic.svg)).data;\n      } catch {\n        console.error(`Can't load icon from ${topic.svg}.`);\n      }\n      this.icons.push(icon);\n    });\n  },\n  computed: {\n    emailInvalid() {\n      const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return !re.test(String(this.email));\n    },\n    nameInvalid() {\n      return !Boolean(this.name)\n    }\n  },\n  methods: {\n    actionSubmit() {\n      if (!this.emailInvalid) {\n        if (this.topics.length <= 0) {\n          this.actionSubscribe();\n          this.step = 2;\n        } else {\n          this.actionGoForwards();\n        }\n      }\n    },\n    actionSubscribe(selected) {\n      if (this.topics.length <= 0) {\n        this.subscribe({\n          requestURL: this.requestURL,\n          callback: this.callback,\n          _: this._\n        });\n      } else {\n        this.selected.forEach((topicSelected, i) => {\n          if (topicSelected) {\n            this.subscribe({\n              requestURL: this.topics[i].requestURL,\n              callback: this.topics[i].callback,\n              _: this.topics[i]._,\n            });\n          }\n        });\n      }\n      this.actionGoForwards();\n    },\n    setHeight(el) {\n      this.$nextTick(() => {\n        const isString = s => typeof s === \"string\" || s instanceof String;\n        const page = isString(el) ? this.$refs[el] : el;\n        const height =\n          this.fullscreen && window.innerWidth > 800\n            ? this.fullscreen\n            : page.getBoundingClientRect().height + \"px\";\n        this.pageMinHeight = height;\n      });\n    },\n    actionGoForwards() {\n      this.transition = \"forwards\";\n      this.step += 1;\n    },\n    actionGoBackwards() {\n      this.transition = \"backwards\";\n      this.step -= 1;\n    },\n    async subscribe(body) {\n      const options = {\n        method: \"POST\",\n        mode: \"no-cors\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: querystring.stringify({\n          \"fields[email]\": this.email,\n          \"fields[validator]\": this.name,\n          ...this.commonFormData,\n          ...body\n        })\n      };\n      fetch(this.requestURL, options);\n    }\n  }\n};\n",{"version":3,"sources":["ValidatorNewsletterSignup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ValidatorNewsletterSignup.vue","sourceRoot":"node_modules/@cosmos-ui/vue/src/NewsletterSignup","sourcesContent":["<template>\n  <div>\n    <div\n      :class=\"['container', `fullscreen__${!!fullscreen}`]\"\n      :style=\"{\n        '--page-min-height': pageMinHeight,\n        background: background || 'none',\n      }\"\n    >\n      <background-stars v-if=\"!background\" />\n      <div class=\"wrapper\">\n        <div class=\"image\">\n          <div class=\"image__img\" v-if=\"step === 2\" key=\"i1\">\n            <graphics-mail class=\"image__img__img\" />\n          </div>\n          <div class=\"image__img\" v-else key=\"i2\">\n            <graphics-planes class=\"image__img__img\" />\n          </div>\n        </div>\n        <div class=\"text\">\n          <transition-group\n            class=\"page__container\"\n            :name=\"transition\"\n            @before-enter=\"setHeight\"\n          >\n            <div class=\"page\" v-show=\"step === 0\" ref=\"step0\" key=\"step0\">\n              <div class=\"page__wrapper\">\n                <div class=\"icon-hero\" v-if=\"iconHero\">\n                  <div v-html=\"iconHero\"></div>\n                </div>\n                <label for=\"newsletter_email\" class=\"h1\">{{ h1 }}</label>\n                <div class=\"p1\">{{ h2 }}</div>\n                <div :class=\"['email__form', `email__form__validator__${!!validator}`]\">\n                  <div class=\"email__form__input\">\n                    <input\n                      @keypress.enter=\"actionSubmit\"\n                      id=\"newsletter_email\"\n                      v-model=\"email\"\n                      class=\"email__form__input__input\"\n                      type=\"text\"\n                      placeholder=\"Your email\"\n                      required\n                    />\n                    <input\n                      @keypress.enter=\"actionSubmit\"\n                      id=\"newsletter_validator\"\n                      v-model=\"name\"\n                      :class=\"['email__form__input__input', `validator__${!!validator}`]\"\n                      type=\"text\"\n                      placeholder=\"Your validator name\"\n                      required\n                    />\n                  </div>\n                  <ds-button\n                    class=\"button-sign-up\"\n                    @click=\"actionSubmit\"\n                    :disabled=\"emailInvalid && nameInvalid\"\n                  >\n                    Sign up\n                    <template v-slot:right>\n                      <icon-arrow-right />\n                    </template>\n                  </ds-button>\n                </div>\n                <div class=\"p2\">\n                  You can unsubscribe at any time.\n                  <a href=\"https://cosmos.network/privacy\" target=\"_blank\"\n                    >Privacy Policy</a\n                  >\n                </div>\n              </div>\n            </div>\n            <div class=\"page\" v-show=\"step === 1\" ref=\"step1\" key=\"step1\">\n              <div class=\"page__wrapper\">\n                <div style=\"display: inline-block\">\n                  <ds-button\n                    size=\"s\"\n                    color=\"#66A1FF\"\n                    backgroundColor=\"rgba(0,0,0,0)\"\n                    type=\"text\"\n                    @click.native=\"actionGoBackwards\"\n                  >\n                    <template v-slot:left>\n                      <icon-chevron-left />\n                    </template>\n                    Back\n                  </ds-button>\n                </div>\n                <div class=\"h2\">What are you interested in?</div>\n                <div class=\"card-checkbox-list\">\n                  <card-checkbox\n                    v-for=\"(topic, i) in topics\"\n                    :key=\"topic.h1\"\n                    v-model=\"selected[i]\"\n                    theme=\"dark\"\n                  >\n                    <template v-slot:icon>\n                      <div v-if=\"icons[i]\" v-html=\"icons[i]\"></div>\n                      <icon-network v-else />\n                    </template>\n                    <template v-slot:h1>\n                      {{ topic.h1 }}\n                    </template>\n                    {{ topic.h2 }}\n                  </card-checkbox>\n                </div>\n                <div style=\"display: inline-block\">\n                  <ds-button\n                    size=\"l\"\n                    @click=\"actionSubscribe\"\n                    :disabled=\"!selected.some((t) => t)\"\n                  >\n                    Get updates\n                  </ds-button>\n                </div>\n              </div>\n            </div>\n            <div class=\"page\" v-show=\"step === 2\" ref=\"step2\" key=\"step2\">\n              <div class=\"page__wrapper\">\n                <div class=\"h1\">Almost there…</div>\n                <div class=\"p1\">\n                  You should get a confirmation email for each of your selected\n                  interests. Open it up and click ‘<strong\n                    >Confirm your email</strong\n                  >’ so we can keep you updated.\n                </div>\n                <div class=\"h3\">Don’t see the confirmation email yet?</div>\n                <div class=\"p2\">\n                  It might be in your spam folder. If so, make sure to mark it\n                  as “not spam”.\n                </div>\n              </div>\n            </div>\n          </transition-group>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\na {\n  color: #66a1ff;\n  text-decoration: none;\n}\n.icon-hero {\n  width: 4rem;\n  height: 4rem;\n  margin: 1.5rem 0 2rem;\n  color: rgba(255, 255, 255, 0.5);\n}\n.container {\n  background: var(--newsletter-background);\n  font-family: var(--ds-font-family, inherit);\n  color: white;\n  position: relative;\n}\n.wrapper {\n  display: grid;\n  grid-template-columns: 50% 50%;\n  grid-template-rows: 1fr;\n  align-items: center;\n  width: 100%;\n}\n.image {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n  transform: translateZ(0);\n}\n.image__img {\n  position: absolute;\n  top: 50%;\n  left: 100%;\n  transform: translate(-85%, -50%);\n}\n.text {\n  max-width: 36rem;\n  position: relative;\n  width: 100%;\n  overflow-y: hidden;\n  transition: min-height 0.5s ease-in-out;\n  height: 100%;\n  min-height: var(--page-min-height);\n}\n.page {\n  padding-left: 1rem;\n  padding-right: 1rem;\n  box-sizing: border-box;\n  padding-top: 5rem;\n  padding-bottom: 5rem;\n  width: 100%;\n  display: flex;\n  align-items: center;\n}\n.page__wrapper {\n  width: 100%;\n}\n.page__container {\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n.h1 {\n  font-size: 2rem;\n  font-weight: 600;\n  line-height: 1.25;\n  color: var(--white-100, white);\n  margin-bottom: 1.5rem;\n  display: block;\n}\n.fullscreen__true .h1 {\n  font-size: 2.5rem;\n}\n.h2 {\n  font-size: 2rem;\n  color: white;\n  font-weight: 600;\n  line-height: 1.25;\n  margin-top: 2.5rem;\n  margin-bottom: 2.5rem;\n}\n.h3 {\n  font-size: 0.8125rem;\n  font-weight: 600;\n  color: rgba(255, 255, 255, 0.8);\n  text-transform: none;\n  margin: initial;\n  letter-spacing: initial;\n  line-height: 1.25rem;\n}\n.h4 {\n  margin-bottom: 0.5rem;\n  font-weight: 800;\n  line-height: 20px;\n  letter-spacing: 0.07em;\n  text-transform: uppercase;\n  color: rgba(255, 255, 255, 0.5);\n}\n.p1 {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 1.25rem;\n  line-height: 1.4;\n  font-weight: 400;\n  margin-bottom: 2rem;\n}\n.p2 {\n  font-size: 0.8125rem;\n  color: rgba(255, 255, 255, 0.5);\n  line-height: 1.25rem;\n  margin-top: 1rem;\n}\n.email__form {\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: 1fr min-content;\n  gap: 1rem;\n  margin-top: 2.5rem;\n  margin-bottom: 1.5rem;\n}\n.email__form__validator__true {\n  display: flex !important;\n  flex-direction: column !important;\n  gap: unset !important;\n  max-width: 24rem;\n}\n.email__form__validator__true > div {\n  margin-top: 1rem !important;\n}\n.validator__true {\n  margin-top: 1rem !important;\n}\n.email__form__input__input {\n  outline: none;\n  width: 100%;\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  border-radius: 0.25rem;\n  color: white;\n  font-size: 1rem;\n  padding: 0.75rem 1rem;\n  line-height: 1.5;\n  height: auto;\n  box-sizing: border-box;\n  transition: all 0.15s;\n  backdrop-filter: blur(10px);\n  font-family: var(--ds-font-family, inherit);\n  font-weight: 400;\n  margin: 0;\n}\n.email__form__input__input:hover {\n  background-color: rgba(255, 255, 255, 0.13);\n}\n.email__form__input__input:focus {\n  box-shadow: inset 0 0 0 1.5px #66a1ff;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n.email__form__input__input::-webkit-input-placeholder,\n.email__form__input__input::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n  transition: color 0.15s;\n}\n.email__form__input__input:hover:not(:focus)::-webkit-input-placeholder,\n.email__form__input__input:hover:not(:focus)::placeholder {\n  color: rgba(255, 255, 255, 0.8);\n}\n.card-checkbox-list {\n  margin-top: 2.5rem;\n  margin-bottom: 2.5rem;\n  display: grid;\n  grid-auto-flow: row;\n  gap: 1rem;\n}\n.forwards-enter-active,\n.forwards-leave-active,\n.backwards-enter-active,\n.backwards-leave-active {\n  transition: all 0.5s ease-in-out;\n  position: absolute;\n}\n.forwards-enter {\n  opacity: 0;\n  transform: translateY(50px);\n}\n.forwards-enter-to {\n  opacity: 1;\n  transform: translateY(0);\n}\n.forwards-leave {\n  opacity: 1;\n  transform: translateY(0);\n}\n.forwards-leave-to {\n  opacity: 0;\n  transform: translateY(-50px);\n}\n.backwards-enter {\n  opacity: 0;\n  transform: translateY(-50px);\n}\n.backwards-enter-to {\n  opacity: 1;\n  transform: translateY(0);\n}\n.backwards-leave {\n  opacity: 1;\n  transform: translateY(0);\n}\n.backwards-leave-to {\n  opacity: 0;\n  transform: translateY(50px);\n}\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 5s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n.fade-enter-to,\n.fade-leave {\n  opacity: 1;\n}\n@media screen and (max-width: 800px) {\n  .icon-hero {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n  }\n  .wrapper {\n    grid-template-columns: 1fr;\n  }\n  .page__container {\n    align-items: flex-start;\n  }\n  .page {\n    padding-bottom: 0;\n  }\n  .image {\n    height: 250px;\n    display: flex;\n    justify-content: center;\n  }\n  .image__img {\n    position: relative;\n    left: 0;\n    top: 0;\n    transform: translateY(-100%);\n  }\n  .image__img__img {\n    width: 500px;\n    left: 50%;\n    position: absolute;\n    transform: translateX(-50%);\n  }\n  .text {\n    transform: translateY(-75px);\n    justify-self: center;\n    max-width: 560px;\n    height: auto;\n  }\n  .h1,\n  .p1,\n  .p2,\n  .h3,\n  .h4 {\n    text-align: center;\n  }\n}\n@media screen and (max-width: 400px) {\n  .email__form {\n    grid-template-columns: 1fr;\n    grid-auto-flow: row;\n  }\n  .h1,\n  .h2,\n  .fullscreen__true .h1 {\n    font-size: 1.5rem;\n  }\n  .h2 {\n    margin-top: 1rem;\n    margin-bottom: 1rem;\n  }\n  .p1 {\n    font-size: 1rem;\n  }\n  .h4 {\n    font-size: 0.8125rem;\n  }\n}\n</style>\n\n<script>\nimport GraphicsPlanes from \"./GraphicsPlanes\";\nimport GraphicsMail from \"./GraphicsMail\";\nimport DsButton from \"./DsButton\";\nimport IconArrowRight from \"../Icons/IconArrowRight\";\nimport IconChevronLeft from \"../Icons/IconChevronLeft\";\nimport IconNetwork from \"../Icons/IconNetwork\";\nimport IconIbc from \"../Icons/IconIbc\";\nimport CardCheckbox from \"./CardCheckbox\";\nimport querystring from \"querystring\";\nimport axios from \"axios\";\nimport BackgroundStars from \"./BackgroundStars\";\n\nexport default {\n  props: {\n    h1: {\n      default: \"Sign up for Cosmos updates\"\n    },\n    h2: {\n      default:\n        \"Get the latest from the Cosmos ecosystem and engineering updates, straight to your inbox.\"\n    },\n    requestURL: {\n      default: \"https://app.mailerlite.com/webforms/submit/o0t6d7\"\n    },\n    callback: {\n      default: \"jQuery18307296239382192573_1594158619276\"\n    },\n    _: {\n      default: \"1594158625563\"\n    },\n    groups: {\n      default: false\n    },\n    svg: {\n      default: false\n    },\n    background: {\n      default: false\n    },\n    topics: {\n      default: () => []\n    },\n    banner: {\n      type: Boolean,\n      default: true\n    },\n    fullscreen: {\n      type: String\n    },\n    validator: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    fullscreen() {\n      this.setHeight(`step${this.step}`);\n    }\n  },\n  components: {\n    GraphicsPlanes,\n    GraphicsMail,\n    DsButton,\n    IconArrowRight,\n    IconChevronLeft,\n    IconIbc,\n    CardCheckbox,\n    IconNetwork,\n    BackgroundStars\n  },\n  data: function() {\n    return {\n      step: 0,\n      transition: \"forwards\",\n      pageMinHeight: null,\n      email: null,\n      name: null,\n      selected: this.topics.map(t => false),\n      icons: [],\n      ready: false,\n      iconHero: false,\n      commonFormData: {\n        \"ml-submit\": \"1\",\n        \"ajax\": \"1\",\n        \"guid\": \"6ca22b31-4124-e926-cf4f-272ff9f44ec3\"\n      }\n    };\n  },\n  async mounted() {\n    if (this.svg) {\n      this.iconHero = (await axios.get(this.svg)).data;\n    }\n    this.setHeight(`step${this.step}`);\n    this.ready = true;\n    this.topics.forEach(async topic => {\n      let icon = false;\n      try {\n        icon = (await axios.get(topic.svg)).data;\n      } catch {\n        console.error(`Can't load icon from ${topic.svg}.`);\n      }\n      this.icons.push(icon);\n    });\n  },\n  computed: {\n    emailInvalid() {\n      const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return !re.test(String(this.email));\n    },\n    nameInvalid() {\n      return !Boolean(this.name)\n    }\n  },\n  methods: {\n    actionSubmit() {\n      if (!this.emailInvalid) {\n        if (this.topics.length <= 0) {\n          this.actionSubscribe();\n          this.step = 2;\n        } else {\n          this.actionGoForwards();\n        }\n      }\n    },\n    actionSubscribe(selected) {\n      if (this.topics.length <= 0) {\n        this.subscribe({\n          requestURL: this.requestURL,\n          callback: this.callback,\n          _: this._\n        });\n      } else {\n        this.selected.forEach((topicSelected, i) => {\n          if (topicSelected) {\n            this.subscribe({\n              requestURL: this.topics[i].requestURL,\n              callback: this.topics[i].callback,\n              _: this.topics[i]._,\n            });\n          }\n        });\n      }\n      this.actionGoForwards();\n    },\n    setHeight(el) {\n      this.$nextTick(() => {\n        const isString = s => typeof s === \"string\" || s instanceof String;\n        const page = isString(el) ? this.$refs[el] : el;\n        const height =\n          this.fullscreen && window.innerWidth > 800\n            ? this.fullscreen\n            : page.getBoundingClientRect().height + \"px\";\n        this.pageMinHeight = height;\n      });\n    },\n    actionGoForwards() {\n      this.transition = \"forwards\";\n      this.step += 1;\n    },\n    actionGoBackwards() {\n      this.transition = \"backwards\";\n      this.step -= 1;\n    },\n    async subscribe(body) {\n      const options = {\n        method: \"POST\",\n        mode: \"no-cors\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: querystring.stringify({\n          \"fields[email]\": this.email,\n          \"fields[validator]\": this.name,\n          ...this.commonFormData,\n          ...body\n        })\n      };\n      fetch(this.requestURL, options);\n    }\n  }\n};\n</script>\n"]}]}